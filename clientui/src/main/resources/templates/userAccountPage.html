<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/layout.html}">
	<head>
		<meta charset="UTF-8">
		<title>Mon Compte</title>
	</head>
	<body>
		<section layout:fragment="content">
			<div class="row mx-auto">
				<div class="col-10 col-md-8 card border-secondary mx-auto infoperso">
   					<div class="card-header text-center">
						<h3>Mes Informations</h3>
						<a th:href="@{/compte/__${user.id}__/maj}" class="btn btn-info btn-sm" role="button">Modifier vos informations</a>
					</div>
					<div class="card-body mx-auto col-10 col-md-8">
						<form class="form-horizontal" role="form">
							<div class="form-group row justify-content-center">
								<label class="col-md-4 col-10 col-form-label form-control-label border bg-light">Nom : </label>
								<label class="col-md-6 col-10 col-form-label form-control-label border" th:text="${user.lastName}"></label>
							</div>
							<div class="form-group row justify-content-center">
								<label class="col-md-4 col-10 col-form-label form-control-label border bg-light">Prénom :</label>
								<label class="col-md-6 col-10 col-form-label form-control-label border" th:text="${user.firstName}"></label>
							</div>
							<div class="form-group row justify-content-center">
								<label class="col-md-4 col-10 col-form-label form-control-label border bg-light">E-mail :</label>
								<label class="col-md-6 col-10 col-form-label form-control-label border" th:text="${user.email}"></label>
							</div>
							<div class="form-group row justify-content-center">
								<label class="col-md-4 col-10 col-form-label form-control-label border bg-light">Téléphone :</label>
								<label class="col-md-6 col-10 col-form-label form-control-label border" th:text="${user.phoneNumber}"></label>
							</div>
							<div class="form-group row justify-content-center">
								<label class="col-md-4 col-10 col-form-label form-control-label border bg-light">N° de carte :</label>
								<label class="col-md-6 col-10 col-form-label form-control-label border" th:text="${user.cardNumber}"></label>
							</div>
							<div class="form-group row justify-content-center">
								<label class="col-md-4 col-10 col-form-label form-control-label border bg-light">Date d'inscription :</label>
								<label class="col-md-6 col-10 col-form-label form-control-label border" th:text="${user.dateRegistration}"></label>
							</div>
<!-- 							<div class="form-group row justify-content-center"> -->
<!-- 								<label class="col-md-4 col-10 col-form-label form-control-label border bg-light">Mot de Passe :</label> -->
<!-- 								<label class="col-md-6 col-10 col-form-label form-control-label border"> -->
<!--         							<a class="btn btn-info btn-sm col-6" th:href="@{/compte/__${user.id}__/majmdp}" role="button">Modifier</a> -->
<!-- 								</label> -->
<!-- 							</div> -->
      					</form>
      				</div>
      			</div>
      			<div class="col-10 col-md-8 card border-secondary mx-auto">
   					<div class="card-header text-center">
      					<h3>Mes emprunts</h3>
      				</div>
      				<div class="card-body mx-auto col-10 col-md-8">
      					<div class="list-group">
      						<div class="list-group-item list-group-item-action flex-column align-items-start" th:each="borrowing : ${borrowings}" th:if="${borrowing.state != 'Prêt terminé'}">
      							<div class="d-flex w-100 justify-content-around border-bottom">
    								<h5 class="mb-1" th:text="${borrowing.bookName}"></h5>
	    						</div>
    							<br/>
    							<p class="mb-1">Date de fin de prêt : <span th:text="${borrowing.deadline}"></span></p>
    							<p class="mb-1" th:text="${borrowing.state}"></p>
    							<span th:if="${borrowing.state != 'Prêt en retard' and borrowing.renewal == false}">
    								<br/>
    								<form th:action="@{/emprunt/__${borrowing.id}__/renouvellement}" method="post">
    									<div th:if="${errorMessage != null}" class="alert alert-warning" role="alert">
											<span th:text="${errorMessage}"></span>
										</div>
    									<div class="text-center">
    										<input type="submit" class="btn btn-info btn-sm btn-block" id="submit" name="submit" value="Renouveller son prêt">
    									</div>
    								</form>							
    							</span>
    							<span th:unless="${borrowing.state != 'Prêt en retard' and borrowing.renewal == false}">
    							</span>
      						</div>
      					</div>
      				</div>
      			</div>
      			<div class="col-10 col-md-8 card border-secondary mx-auto">
   					<div class="card-header text-center">
      					<h3>Mes réservations</h3>
      				</div>
      				<div class="card-body mx-auto col-10 col-md-8">
      					<div class="list-group">
      						<span th:if="${bookings ne null}">
      							<div class="list-group-item list-group-item-action flex-column align-items-start" th:each="booking : ${bookings}" th:if="${bookings.state != 'Réservation terminé'}">
      								<div class="d-flex w-100 justify-content-around border-bottom">
    									<h5 class="mb-1" th:text="${booking.bookName}"></h5>
	    							</div>
    								<br/>
    								<p class="mb-1">Date prochaine de fin de prêt : <span th:text="${booking.nearlestDeadline}"></span></p>
    								<p class="mb-1">Position dans la liste d'attente : <span th:text="${booking.position}"></span></p>
    								<a class="btn btn-info btn-sm btn-block" th:href="@{/reservation/__${booking.id}__/cancel-booking}" role="button">Annuler cette réservation</a>
      							</div>
      						</span>
      						<span th:unless="${bookings ne null}">
      							<p class="mb-1">Vous n'avez pas de réservation en cours.</p>
      						</span>
      					</div>
      				</div>
      			</div>
      		</div>
		</section>
	</body>
</html>